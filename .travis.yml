branches:
  only:
    - master

language: go

go:
  - 1.8

install:
  - go get -t ./...
  - go get -u github.com/kisielk/errcheck

script:
  - go test ./...
  - errcheck ./...
  - go build
  - |
    ./lockd -cluster ./util/cluster_test.json -id 42 &
    sleep 2
  - go run integtests/main.go
  - python pyclient/integtest.py
